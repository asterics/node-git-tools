{"version":3,"sources":["webpack://@asterics/git-tools/webpack/universalModuleDefinition","webpack://@asterics/git-tools/webpack/bootstrap","webpack://@asterics/git-tools/external \"fs\"","webpack://@asterics/git-tools/external \"path\"","webpack://@asterics/git-tools/./src/index.js","webpack://@asterics/git-tools/webpack://@asterics/git-tools/webpack/universalModuleDefinition","webpack://@asterics/git-tools/webpack://@asterics/git-tools/webpack/bootstrap","webpack://@asterics/git-tools/webpack://@asterics/git-tools/src/index.js","webpack://@asterics/git-tools/webpack:/@asterics/git-tools/external \"fs\"","webpack://@asterics/git-tools/external \"child_process\""],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","isDirectory","result","fs","existsSync","accessSync","constants","R_OK","statSync","isLocalGitRepository","f","readdirSync","map","e","path","join","filter","find","test","mapDirectoryStats","dirPath","dirName","stat","isLocalRepositoryPath","rGitFolder","folders","length","err","gitwd","location","checkDep","_nodeUtils","hasShellCommand","console","log","repository","isAbsolute","search","RegExp","current","normalize","levels","split","sep","from","resultPath","auto","replace","searchPath","parentDirs","rSearch","reference","branch","fatality","verbose","commands","submodule","checkout","sync","execute","cmd","success","error","default","arguments","keys","getOwnPropertySymbols","concat","getOwnPropertyDescriptor","forEach","configurable","writable","msg","vmsg","argv","header","repeat","body","env","fatal","shift","spawnSync","shell","encoding","_objectSpread","process","status","stderr","stdout","exit","mkdirp","directories","directory","parent","mkdirSync","args","has"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,OAAA,GAAAH,GACA,iBAAAC,QACAA,QAAA,uBAAAD,IAEAD,EAAA,uBAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAT,QAAA,IAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,mBClFAtC,EAAAD,QAAAwC,QAAA,qBCAAvC,EAAAD,QAAAwC,QAAA,2KCuBA,SAASC,EAAY3B,GACnB,IAAI4B,GAAS,EAKb,OAJIC,UAAGC,WAAW9B,KAChB6B,UAAGE,WAAW/B,EAAG6B,UAAGG,UAAUC,MAC9BL,EAASC,UAAGK,SAASlC,GAAG2B,eAEnBC,EAGT,SAASO,EAAqBnC,GAC5B,IAAIoC,EAAIP,UAAGQ,YAAYrC,GAMvB,SAFAoC,GAFAA,EAAIA,EAAEE,IAAIC,GAAKC,UAAKC,KAAKzC,EAAGuC,KAEtBG,OAAOH,GAAKZ,EAAYY,KAErBI,KAAKJ,GAAK,QAAQK,KAAKL,IAiClC,SAASM,EAAkBC,EAASC,GAClC,IAAIvB,KAAOsB,KAAWC,IACtB,MAAO,CAAEP,KAAMhB,EAAGwB,KAAMnB,UAAGK,SAASV,IAItC,SAASyB,EAAsBH,GAC7B,IACEjB,UAAGE,WAAWe,EAASjB,UAAGG,UAAUC,MACpC,IAAIiB,EAAa,QACfC,EAAUtB,UACPQ,YAAYS,GACZR,IAAIC,GAAKM,EAAkBC,EAASP,IACpCG,OAAOH,GAAKA,EAAES,KAAKrB,eAAiBuB,EAAWN,KAAKL,EAAEC,OAC3D,OAAOW,EAAQC,OAAS,EACxB,MAAOC,GACP,OAAO,GA2CX,SAASC,EAAMC,GACb,OAAOA,eAAwBA,sBAA6BA,IAAa,GAG3E,SAASC,IACP,SAAK,EAAAC,EAAAC,iBAAgB,SACnBC,QAAQC,IAAI,+CACL,yEAhGJ,SAA4BL,EAAUM,GAC3C,IAAKrB,UAAKsB,WAAWP,GAAW,OAEhC,IACI3B,EADAmC,EAAS,IAAIC,OAAOH,EAAa,KAEjCI,EAAUzB,UAAK0B,UAAUX,GACzBY,EAASF,EAAQG,MAAM5B,UAAK6B,KAAKjB,OAErC,IAAK,IAAI1D,EAAI,EAAGA,EAAIyE,IAAWvC,EAAQlC,IAAKuE,EAAUzB,UAAKC,KAAKwB,EAAS,MACvE,IACE,GAAIpC,UAAGC,WAAWmC,GAAU,CAC1B,IAAI7B,EAAIP,UAAGQ,YAAY4B,GAMvB7B,GAFAA,GAFAA,EAAIA,EAAEE,IAAIC,GAAKC,UAAKC,KAAKwB,EAAS1B,KAE5BG,OAAOH,GAAKZ,EAAYY,KAExBG,OAAOH,GAAKJ,EAAqBI,IAEvCX,EAASQ,EAAEO,KAAKJ,GAAKwB,EAAOnB,KAAKL,KAEnC,MAAOc,GACPzB,GAAS,EAIb,OAAOA,GAAkB,mBAyBpB,SAAsB0C,EAAMrE,GACjC,IAEEsE,EAFEC,EAAO,SAKX,GAAIA,EAAK5B,KAAK3C,GAAO,CACnBA,EAAOA,EAAKwE,QAAQD,EAAM,IAE1B,IAAIE,EAAaJ,EACfK,EAAaD,EAAWN,MAAM,KAAKhB,OACnCwB,EAAU,IAAIZ,OAAO,IAAM/D,EAAO,KAEpC,IAAK,IAAIP,EAAI,EAAGA,EAAIiF,EAAYjF,IAAK,CACnC,IAAIqE,EAASlC,UACVQ,YAAYqC,GACZpC,IAAIC,GAAKM,EAAkB6B,EAAYnC,IACvCG,OAAOH,GAAKA,EAAES,KAAKrB,eACnBe,OAAOH,GAAKqC,EAAQhC,KAAKL,EAAEC,OAC3BE,OAAOH,GAAKU,EAAsBV,EAAEC,OACvC,GAAIuB,EAAOX,OAAS,EAAG,CACrBmB,EAAaR,EAAO,GAAGvB,KACvB,MAGFkC,EAAalC,UAAKC,KAAKiC,EAAY,WAvB5B,UA0BO9B,KAAK3C,GACrBsE,EAAa,GAEJ/B,UAAKsB,WAAW7D,KACzBsE,EAAatE,GAGf,OAAOsE,wBAeF,UAA4BtE,KAAEA,EAAFsD,SAAQA,EAARsB,UAAkBA,EAAY,GAA9BC,OAAkCA,EAAS,SAA3CC,SAAqDA,GAAW,GAASC,GAAU,GACpH,IAAKxB,IAAY,OAEjB,IAEIyB,EAAW,CACbC,yCAHmBL,iBAA2BA,IAAc,MAGAtB,IAC5D4B,gBAAiB7B,EAAMC,eAAsBuB,IAC7CM,YAAa9B,EAAMC,kBAIrB,EAAAE,EAAA4B,SAAQ,CACNC,IAAKL,EAAQ,UACbM,sBAAuBtF,YACvBuF,mCAAoCvF,KACpC8E,WACAC,aAIF,EAAAvB,EAAA4B,SAAQ,CACNC,IAAKL,EAAQ,SACbM,sBAAuBtF,sBAAyB6E,KAChDU,wCAAyCvF,UAAa6E,KACtDC,WACAC,aAIF,EAAAvB,EAAA4B,SAAQ,CACNC,IAAKL,EAAQ,KACbM,sBAAuBtF,qCACvBuF,yBAA0BvF,wBAC1B8E,WACAC,iCAIG,UAA2B/E,KAAEA,EAAFsD,SAAQA,EAARsB,UAAkBA,EAAlBC,OAA6BA,EAAS,SAAtCC,SAAgDA,GAAW,GAASC,GAAU,GAC9G,IAAKxB,IAAY,OAEjB,IAAIyB,EAAW,CACbE,gBAAiB7B,EAAMC,eAAsBuB,MAI/C,EAAArB,EAAA4B,SAAQ,CACNC,IAAKL,EAAQ,SACbM,sBAAuBtF,kBAAqBA,SAAY6E,KACxDU,8BAA+BvF,UAAa6E,KAC5CC,WACAC,qJC1LH1F,OAPDH,UAQA,SAAAoD,GCTA,IAAA3B,EAAA,GAGA,SAAAT,EAAAgB,GAGA,GAAAP,EAAAO,GACA,OAAAP,EAAAO,GAAAjC,QAGA,IAAAsB,EAAAI,EAAAO,GAAA,CACAzB,IACAC,KACAT,YAUA,OANAU,mCAGAT,OAGAqB,EAAAtB,QA0DA,OArDAM,MAGAA,MAGAA,oBACAA,UACAY,2BAA0CE,uBAK1Cd,gBACA,oBAAAiB,eAAAC,aACAN,4CAAwDO,iBAExDP,sCAAiDO,YAQjDnB,kBAEA,GADA,EAAAoB,IAAA2B,EAAApC,EAAAoC,IACA,EAAA3B,EAAA,OAAA2B,EACA,KAAA3B,GAAA,iBAAA2B,QAAAzB,WAAA,OAAAyB,EACA,IAAApB,EAAAf,OAAAY,OAAA,MAGA,GAFAxB,OACAY,mCAAyCE,wBACzC,EAAAM,GAAA,iBAAA2B,EAAA,QAAA/B,KAAA+B,EAAApC,EAAAH,EAAAmB,EAAAX,EAAA,SAAAI,GAAgH,OAAA2B,EAAA3B,IAAqBM,cACrI,OAAAC,GAIA3B,gBACA,IAAAoB,EAAA2B,KAAAzB,WACA,WAA2B,OAAAyB,EAAAkD,SAC3B,WAAiC,OAAAlD,GAEjC,OADA/C,aACAoB,GAIApB,kBAAsD,OAAAY,OAAAkB,UAAAC,eAAA1B,KAAA0C,EAAA3B,IAGtDpB,OAIAW,IAAAsB,EAAA,GDxEA,CCwEA,UAAAc,EAAA3B,EAAAT,GAAA,IAAAgB,EAAAX,EAAAT,EAAAS,EAAA,CAAAI,EAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,cAAAJ,EAAA,mBAAAoB,EAAA,SAAAoB,EAAA3B,EAAAT,EAAAgB,GAAA,SAAAX,EAAA+B,GAAA,QAAA3B,EAAA,EAAAA,EAAA8E,UAAAtC,OAAAxC,IAAA,KAAAT,EAAA,MAAAuF,UAAA9E,GAAA8E,UAAA9E,GAAA,GAAAO,EAAAf,OAAAuF,KAAAxF,GAAA,mBAAAC,OAAAwF,wBAAAzE,IAAA0E,OAAAzF,OAAAwF,sBAAAzF,GAAAuC,OAAA,SAAAH,GAAA,OAAAnC,OAAA0F,yBAAA3F,EAAAoC,GAAAjC,eAAAa,EAAA4E,QAAA,SAAAnF,GAAAb,EAAAwC,EAAA3B,EAAAT,EAAAS,MAAA,OAAA2B,EAAA,SAAAxC,EAAAwC,EAAA3B,EAAAT,GAAA,OAAAS,KAAA2B,EAAAnC,OAAAC,eAAAkC,EAAA3B,EAAA,CAAAD,MAAAR,EAAAG,YAAA,EAAA0F,cAAA,EAAAC,UAAA,IAAA1D,EAAA3B,GAAAT,EAAAoC,EC3DA,SAASqB,EAAIsC,EAAKlB,EAASmB,EAAMb,EAAKc,GACpC,IACIC,EAAS,IAAIC,OADL,IAERC,EAAO,IAAID,OAFH,IAIZ3C,QAAQC,IAAIsC,GACRlB,IACFrB,QAAQC,IAAIyC,GACZ1C,QAAQC,IAAI,IAAK0B,EAAKc,EAAK3D,KAAK,MAChCkB,QAAQC,IAAI2C,GACZ5C,QAAQC,IAAIuC,GACZxC,QAAQC,IAAI2C,+DAIT,UAAiBjB,IAAEA,EAAM,GAARA,QAAYC,EAAU,UAAtBD,MAAiCE,EAAQ,QAAzCF,IAAkDkB,EAAM,GAAxDlB,MAA4DmB,KAA5DnB,QAA2EN,OACjG,IAAIoB,EAAOd,EAAIlB,MAAM,KAGrB,GAAY,MAFZkB,EAAMc,EAAKM,SAEK,CACd,MAAMlG,KAAIW,EAAAwF,WAAUrB,EAAKc,EAAM,CAAEQ,SAAaC,SAAU,QAASL,IAAGM,KAAOC,QAAQP,IAAQA,KAC1E,IAAbhG,EAAEwG,QACJpD,EAAI4B,EAAOR,EAASxE,EAAEyG,QAAUzG,EAAE0G,OAAQ5B,EAAKc,GAC3CK,GAAOM,QAAQI,KAAK,IAExBvD,EAAI2B,EAASP,EAASxE,EAAE0G,QAAU1G,EAAEyG,OAAQ3B,EAAKc,cAKhD,SAASgB,KAAUC,GACxB,IAAK,IAAIC,KAAaD,EAAa,CACjC,OAAKlH,EAAA2D,YAAWwD,GAAY,SAC5B,IAAIC,KAASpH,EAAAsC,MAAK6E,EAAW,MACzBC,OAAWpH,EAAAsC,MAAK,SAAS7B,EAAAkB,YAAWyF,IAASH,EAAOG,MACnD3G,EAAAkB,YAAWwF,OAAY1G,EAAA4G,WAAUF,uBAInC,YAA4BG,GACjC,IAAIC,KACJ,IAAK,IAAIpC,KAAOmC,EAAM,CACpB,IAAIT,OAAEA,MAAW7F,EAAAwF,WAAW,QAAQ,CAACrB,GAAM,CAAEuB,SAAU,UACxC,IAAXG,IACFU,MAGJ,OAAOA,mDCtETvI,8HCAAA,EAAAD,QAAAwC,QAAA","file":"index.node.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@asterics/git-tools\"] = factory();\n\telse\n\t\troot[\"@asterics/git-tools\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","//\n// @asterics/git-tools\n// git-tools is a collection of methods to manipulate local git repositories\n//\n// Copyright (C) 2019  Alijs Sabic <sabic@technikum-wien.at>\n// https://github.com/sabicalija/node-git-tools.git\n\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\nimport fs from \"fs\";\nimport path from \"path\";\nimport { execute, hasShellCommand } from \"@asterics/node-utils\";\n\nfunction isDirectory(d) {\n  let result = false;\n  if (fs.existsSync(d)) {\n    fs.accessSync(d, fs.constants.R_OK);\n    result = fs.statSync(d).isDirectory();\n  }\n  return result;\n}\n\nfunction isLocalGitRepository(d) {\n  let f = fs.readdirSync(d);\n  /* Map to absolute path */\n  f = f.map(e => path.join(d, e));\n  /* Extract directories only */\n  f = f.filter(e => isDirectory(e));\n  /* Check for folder `.git` */\n  return f.find(e => /.git$/.test(e)) ? true : false;\n}\n\nexport function getReferenceInPath(location, repository) {\n  if (!path.isAbsolute(location)) return;\n\n  let search = new RegExp(repository + \"$\");\n  let result;\n  let current = path.normalize(location);\n  let levels = current.split(path.sep).length;\n\n  for (let i = 0; i < levels && !result; i++, current = path.join(current, \"..\")) {\n    try {\n      if (fs.existsSync(current)) {\n        let f = fs.readdirSync(current);\n        /* Map to absolute paths */\n        f = f.map(e => path.join(current, e));\n        /* Extract directories only */\n        f = f.filter(e => isDirectory(e));\n        /* Extract git directories only */\n        f = f.filter(e => isLocalGitRepository(e));\n        /* Find matching entry */\n        result = f.find(e => search.test(e));\n      }\n    } catch (err) {\n      result = false;\n    }\n  }\n\n  return result ? result : \"\";\n}\n\n/** Deprecated */\nfunction mapDirectoryStats(dirPath, dirName) {\n  let p = `${dirPath}/${dirName}`;\n  return { path: p, stat: fs.statSync(p) };\n}\n\n/** Deprecated */\nfunction isLocalRepositoryPath(dirPath) {\n  try {\n    fs.accessSync(dirPath, fs.constants.R_OK);\n    let rGitFolder = /.git$/,\n      folders = fs\n        .readdirSync(dirPath)\n        .map(e => mapDirectoryStats(dirPath, e))\n        .filter(e => e.stat.isDirectory() && rGitFolder.test(e.path));\n    return folders.length > 0;\n  } catch (err) {\n    return 0;\n  }\n}\n\n/** Deprecated */\nexport function gitLocalPath(from, name) {\n  let auto = /^auto:/,\n    remote = /^remote/,\n    resultPath;\n\n  /* auto */\n  if (auto.test(name)) {\n    name = name.replace(auto, \"\");\n\n    let searchPath = from,\n      parentDirs = searchPath.split(\"/\").length,\n      rSearch = new RegExp(\"/\" + name + \"$\");\n\n    for (let i = 0; i < parentDirs; i++) {\n      let search = fs\n        .readdirSync(searchPath)\n        .map(e => mapDirectoryStats(searchPath, e))\n        .filter(e => e.stat.isDirectory())\n        .filter(e => rSearch.test(e.path))\n        .filter(e => isLocalRepositoryPath(e.path));\n      if (search.length > 0) {\n        resultPath = search[0].path;\n        break;\n      }\n      /* Jump to parent directory */\n      searchPath = path.join(searchPath, \"..\");\n    }\n    /* remote */\n  } else if (remote.test(name)) {\n    resultPath = \"\";\n    /* path */\n  } else if (path.isAbsolute(name)) {\n    resultPath = name;\n  }\n\n  return resultPath;\n}\n\nfunction gitwd(location) {\n  return location ? `--git-dir=${location}/.git --work-tree=${location}` : \"\";\n}\n\nfunction checkDep() {\n  if (!hasShellCommand(\"git\")) {\n    console.log(\"ensureGitSubmodule() requires git (shell).\");\n    return false;\n  }\n  return true;\n}\n\nexport function ensureGitSubmodule({ name, location, reference = \"\", branch = \"master\", fatality = false }, verbose = false) {\n  if (!checkDep()) return;\n\n  let localReference = reference ? `--reference ${reference}` : \"\";\n\n  let commands = {\n    submodule: `git submodule update --init ${localReference} ${location}`,\n    checkout: `git ${gitwd(location)} checkout ${branch}`,\n    sync: `git ${gitwd(location)} pull --all`\n  };\n\n  /* clone repository */\n  execute({\n    cmd: commands[\"submodule\"],\n    success: `submodule '${name}' cloned`,\n    error: `failed cloning submodule '${name}'`,\n    fatality,\n    verbose\n  });\n\n  /* checkout branch/tag */\n  execute({\n    cmd: commands[\"checkout\"],\n    success: `submodule '${name}' checked out at '${branch}'`,\n    error: `failed checking out submodule '${name}' at '${branch}'`,\n    fatality,\n    verbose\n  });\n\n  /* synchronize with remote origin */\n  execute({\n    cmd: commands[\"sync\"],\n    success: `submodule '${name}' synchronized with remote origin`,\n    error: `failed pulling '${name}' from remote origin`,\n    fatality,\n    verbose\n  });\n}\n\nexport function checkoutSubmodule({ name, location, reference, branch = \"master\", fatality = false }, verbose = false) {\n  if (!checkDep()) return;\n\n  let commands = {\n    checkout: `git ${gitwd(location)} checkout ${branch}`\n  };\n\n  /* checkout branch */\n  execute({\n    cmd: commands[\"checkout\"],\n    success: `submodule '${name}' checked out ${name} at '${branch}'`,\n    error: `failed checking out '${name}' at '${branch}'`,\n    fatality,\n    verbose\n  });\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@asterics/git-tools\"] = factory();\n\telse\n\t\troot[\"@asterics/git-tools\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","//\n// @asterics/node-utils\n// node-utils is a collection of methods tools for node.js\n//\n// Copyright (C) 2019  Alijs Sabic <sabic@technikum-wien.at>\n// https://github.com/sabicalija/node-utils.git\n\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\nimport { existsSync, mkdirSync } from \"fs\";\nimport { isAbsolute, join } from \"path\";\nimport { spawnSync } from \"child_process\";\n\nfunction log(msg, verbose, vmsg, cmd, argv) {\n  let width = 80;\n  let header = \"-\".repeat(width);\n  let body = \"=\".repeat(width);\n\n  console.log(msg);\n  if (verbose) {\n    console.log(header);\n    console.log(\"$\", cmd, argv.join(\" \"));\n    console.log(body);\n    console.log(vmsg);\n    console.log(body);\n  }\n}\n\nexport function execute({ cmd = \"\", success = \"success\", error = \"error\", env = {}, fatal = false, verbose = false }) {\n  let argv = cmd.split(\" \");\n  cmd = argv.shift();\n\n  if (cmd !== \"\") {\n    const r = spawnSync(cmd, argv, { shell: true, encoding: \"utf-8\", env: { ...process.env, ...env } });\n    if (r.status !== 0) {\n      log(error, verbose, r.stderr || r.stdout, cmd, argv);\n      if (fatal) process.exit(1);\n    } else {\n      log(success, verbose, r.stdout || r.stderr, cmd, argv);\n    }\n  }\n}\n\nexport function mkdirp(...directories) {\n  for (let directory of directories) {\n    if (!isAbsolute(directory)) continue;\n    let parent = join(directory, \"..\");\n    if (parent !== join(\"/\") && !existsSync(parent)) mkdirp(parent);\n    if (!existsSync(directory)) mkdirSync(directory);\n  }\n}\n\nexport function hasShellCommand(...args) {\n  let has = true;\n  for (let cmd of args) {\n    let { status } = spawnSync(`which`, [cmd], { encoding: \"utf-8\" });\n    if (status !== 0) {\n      has = false;\n    }\n  }\n  return has;\n}\n","module.exports = require(\"fs\");","module.exports = require(\"child_process\");"],"sourceRoot":""}